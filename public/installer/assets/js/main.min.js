!(function (e) {
    "use strict";
    e(document).ready(function () {
        var s = 0,
            a = e("#msform fieldset"),
            t = e("#progressbar li");
        function r(e) {
            e.find(".btn-ring").hide(), e.prop("disabled", !1);
        }
        "final" != e("#final").val() &&
            (a.eq(0).addClass("active"), t.eq(0).addClass("processing")),
            e(".installer-btn").on("click", function (s) {
                s.preventDefault();
                let a = e(this),
                    t = a.closest("form").attr("action");
                e.ajax({
                    type: "GET",
                    url: t,
                    dataType: "json",
                    success: function (s) {
                        !0 == s.status
                            ? s.hasOwnProperty("url") &&
                              window.location.replace(`${s.url}`)
                            : !1 == s.status &&
                              (s.hasOwnProperty("message") &&
                                  e(".server-error-message")
                                      .html(`${s.message}`)
                                      .fadeIn()
                                      .delay(5e3)
                                      .fadeOut("slow"),
                              e(a).addClass("remove"));
                    },
                });
            }),
            e(".environment-btn").on("click", function (n) {
                var o;
                n.preventDefault();
                let l = e(this),
                    i = l.closest("form"),
                    c = new FormData(i[0]),
                    d = i.attr("action");
                (o = l).find(".btn-ring").show(),
                    o.prop("disabled", !0),
                    e.ajax({
                        type: "POST",
                        url: d,
                        data: c,
                        dataType: "json",
                        cache: !1,
                        contentType: !1,
                        processData: !1,
                        success: function (n) {
                            var o, i;
                            if (!0 == n.status) {
                                (o = ++s),
                                    a.removeClass("active"),
                                    a.eq(o).addClass("active"),
                                    t.removeClass("processing"),
                                    t.removeClass("active"),
                                    t.eq(o).addClass("processing"),
                                    t.slice(0, o).addClass("active"),
                                    n.hasOwnProperty("url") &&
                                        window.location.replace(`${n.url}`);
                            } else {
                                !1 == n.status &&
                                    (r(l),
                                    n.hasOwnProperty("errors") &&
                                        ((i = n.errors),
                                        e.each(i, function (s, a) {
                                            e("." + s + "_err")
                                                .text(a)
                                                .fadeIn()
                                                .delay(3e4)
                                                .fadeOut("slow");
                                        })),
                                    n.hasOwnProperty("message") &&
                                        e(".error-message")
                                            .html(`${n.message}`)
                                            .fadeIn()
                                            .delay(5e3)
                                            .fadeOut("slow"));
                            }
                        },
                        error: function (e) {
                            r(l);
                        },
                    });
            }),
            e(".btn-process").on("click", function () {
                e(".btn-ring").show(),
                    e(".btn-process").prop("disabled", !0),
                    e(".btn-process").val("disabled"),
                    e(this).closest("form").submit();
            });
    });
})(jQuery);
